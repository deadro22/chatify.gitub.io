(this.webpackJsonpchatify=this.webpackJsonpchatify||[]).push([[0],{151:function(e,t,a){},171:function(e,t,a){e.exports=a(354)},176:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},211:function(e,t){},213:function(e,t){},246:function(e,t){},247:function(e,t){},317:function(e,t,a){},339:function(e,t){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(92),o=a.n(s),i=(a(176),a(10)),c=a(5),l=a.n(c),u=a(8),m=a(1),p=a(2),h=a(4),d=a(3),f=(a(178),a(179),a(39)),v=(a(180),a(9)),g=a.n(v),b=a(16),E=a.n(b),_=new(function(){function e(){Object(m.a)(this,e),this.authenticated=!1}return Object(p.a)(e,[{key:"login",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/api/users/login",t,{withCredentials:!0});case 3:this.authenticated=!0,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),this.authenticated=!1,console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/api/users/logout",null,{withCredentials:!0});case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.reponse);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAuthenticated",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/api/users/auth/check",{withCredentials:!0});case 3:return a=e.sent,this.authenticated=!0,e.abrupt("return",{isAuthed:this.authenticated,user:a});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",this.authenticated=!1);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyLoginData",value:function(e){var t={ident:E.a.string().required().min(3).max(150),password:E.a.string().required().min(10)};return E.a.validate(e,t)}},{key:"verifyRegisterData",value:function(e){var t={username:E.a.string().required().min(3).max(150),email:E.a.string().required().email().min(3).max(150),password:E.a.string().required().min(10)};return E.a.validate(e,t)}},{key:"Register",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/api/users/register",t,{withCredentials:!0});case 3:this.authenticated=!0,a(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.authenticated=!1,console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),y=(a(151),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"src_res_list"},this.props.usersList.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement("p",null,t.username),r.a.createElement(i.b,{to:"/profile/"+t.username,onClick:e.props.toggleSearch},r.a.createElement("i",{className:"fa fa-arrow-alt-circle-right"})))})))}}]),a}(n.Component)),k=(a(317),a(18)),w=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(k.Spring,{from:{opacity:0,transform:"scale(1.1)"},to:{opacity:1,transform:"scale(1)"},config:{friction:17,duration:150}},(function(t){return r.a.createElement("div",{className:"pop_u_main",style:t},r.a.createElement("div",{className:"p_hd_hld"},r.a.createElement("div",{className:"pop_header"},r.a.createElement("h3",null,e.props.title),r.a.createElement("button",{onClick:e.props.togglePopup},r.a.createElement("i",{className:"fal fa-times"}))),e.props.children))}))}}]),a}(n.Component),O=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={srcValue:""},e.searchUserOnInput=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=E.a.validate({srcValue:e.state.srcValue},{srcValue:E.a.string().required()}),n.error){t.next=7;break}return t.next=5,g.a.get("/api/users/profiles/lst",{withCredentials:!0,params:{username:e.state.srcValue}});case 5:r=t.sent,e.setState({usersList:r.data.prf_user_list});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.response);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e.searchUser=function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=E.a.validate({srcValue:e.state.srcValue},{srcValue:E.a.string().required()}),n.error||(e.props.toggleSearch(),e.props.history.push("/search?sch_q="+e.state.srcValue));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fillSearchValue=function(t){e.setState({srcValue:t.target.value})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(w,{togglePopup:this.props.toggleSearch,title:"Search"},r.a.createElement("div",null,r.a.createElement("form",{className:"fr_search",onSubmit:this.searchUser},r.a.createElement("input",{type:"text",placeholder:"search by username, games, rank",onChange:function(t){e.fillSearchValue(t),e.searchUserOnInput()}})),this.state.usersList&&this.state.usersList.length>0&&r.a.createElement(y,{usersList:this.state.usersList,toggleSearch:this.props.toggleSearch})))}}]),a}(n.Component),j=Object(f.g)(O),C=new(function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,[{key:"getBackendLink",value:function(){return"https://cht-bck-d.herokuapp.com"}},{key:"setPostTimeDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear(),s=t.getMinutes().toString(),o=t.getHours().toString();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),o.length<2&&(o="0"+o),n===t.getDate()?"Today | ".concat(o,":").concat(s):"".concat([r,a,n].join("-")," | ").concat(o,":").concat(s)}},{key:"likePost",value:function(e,t,a){a.emit("likePost",{postId:e,userId:t._id})}},{key:"commentPost",value:function(e,t,a,n,r){"Enter"===e.key&&r.length>0&&t.emit("commentPost",{postId:a.postId,userId:n._id,commentBody:r})}},{key:"returnBack",value:function(e){return e.goBack()}},{key:"loadOnFetchScroll",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a,n,r){var s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(document.scrollingElement.scrollHeight-document.scrollingElement.scrollTop===document.scrollingElement.clientHeight)){e.next=13;break}return n(),e.next=5,g.a.get(a,{withCredentials:!0,params:{skp_count:t.skipCount}});case 5:if(!((s=e.sent).data.homePosts.length>0)){e.next=12;break}return o=t.posts,i=o.concat(s.data.homePosts),e.abrupt("return",r({posts:i,skipCount:i.length,newLoading:!1,canLoadData:!0}));case 12:return e.abrupt("return",r({postLimit:!0,newLoading:!1,canLoadData:!1}));case 13:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"toggleSearch",value:function(e){return e?(document.body.style.overflow="auto",!1):(document.body.style.overflow="hidden",!0)}}]),e}()),N=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchActive:!1},e.handleLogout=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.logout();case 2:window.location.href="/login";case 3:case"end":return e.stop()}}),e)}))),e.toggleSearch=function(){var t=C.toggleSearch(e.state.searchActive);e.setState({searchActive:t})},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navBar_main_cl"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navBar_logo_hld"},r.a.createElement(i.b,{to:"/",className:"default_lnk_rm"},r.a.createElement("i",{className:"fab fa-foursquare"}))),r.a.createElement("div",{className:"inter_navBar_mn"},null!==this.props.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/",className:"default_lnk_rm"},r.a.createElement("i",{className:"fal fa-home"})),r.a.createElement("div",{className:"default_lnk_rm",onClick:this.toggleSearch},r.a.createElement("i",{className:"fal fa-search"}))," ",r.a.createElement(i.b,{to:"/explore",className:"default_lnk_rm"},r.a.createElement("i",{className:"fal fa-compass"})),r.a.createElement(i.b,{to:"/profile/"+this.props.user.data.username,className:"default_lnk_rm"},r.a.createElement("i",{className:"fal fa-user"})),r.a.createElement(i.b,{to:"/messages",className:"default_lnk_rm"},r.a.createElement("i",{className:"fal fa-paper-plane"})),r.a.createElement("div",null,r.a.createElement("i",{className:"fal fa-bell"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/login",className:"default_lnk_rm"},r.a.createElement("i",{className:"fal fa-sign-in-alt"})),r.a.createElement(i.b,{to:"/register",className:"default_lnk_rm"},r.a.createElement("i",{className:"fal fa-plus"})))),r.a.createElement("div",{className:"navBar_drp"},null!==this.props.user&&r.a.createElement("button",{className:"bt_default_rm bt_main_b",onClick:this.handleLogout},r.a.createElement("i",{className:"fa fa-cog"})))),!0===this.state.searchActive&&r.a.createElement(j,{toggleSearch:this.toggleSearch}))}}]),a}(n.Component),x=Object(f.g)(N),S=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return this.props.prf_image?this.props.uncc?r.a.createElement("img",{src:C.getBackendLink()+"/api/upld/imgs/image/preview/profile-image/"+this.props.prf_image,width:this.props.size,height:this.props.size,alt:"",style:{borderRadius:"150px",border:"2px solid rgb(100, 100, 100)",objectFit:"cover"}}):r.a.createElement(i.b,{className:"default_lnk_rm",style:{height:this.props.size},to:"/profile/"+this.props.username},r.a.createElement("img",{src:C.getBackendLink()+"/api/upld/imgs/image/preview/profile-image/"+this.props.prf_image,width:this.props.size,height:this.props.size,alt:"",style:{borderRadius:"150px",border:"2px solid rgb(100, 100, 100)",objectFit:"cover"}})):this.props.uncc?r.a.createElement("div",{className:"unv_prof_pic_hld",style:{width:this.props.size,height:this.props.size,fontSize:this.props.f_size}},r.a.createElement("h1",null,this.props.username[0].toUpperCase())):r.a.createElement(i.b,{className:"default_lnk_rm",style:{height:this.props.size,margin:0},to:"/profile/"+this.props.username},r.a.createElement("div",{className:"unv_prof_pic_hld",style:{width:this.props.size,height:this.props.size,fontSize:this.props.f_size}},r.a.createElement("h1",null,this.props.username[0].toUpperCase())))}}]),a}(n.Component),P=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={likesCount:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.likeHeartRef=r.a.createRef(),this.setState({likesCount:this.props.likes.length}),this.props.socket.on("likeRes",(function(t){t.like?e.setState({likesCount:e.state.likesCount+1}):e.setState({likesCount:e.state.likesCount-1})})),this.props.socket.on("likeStyleRes",(function(t){t.like?(e.likeHeartRef.current.className="fa fa-heart",e.likeHeartRef.current.style.color="red"):(e.likeHeartRef.current.className="fal fa-heart",e.likeHeartRef.current.style.color="white")}))}},{key:"render",value:function(){var e=this.props,t=e.likes,a=e.postId,n=e.user,s=e.socket;return r.a.createElement("p",null,r.a.createElement("i",{className:t.includes(n._id)?"fa fa-heart":"fal fa-heart",onClick:function(){return C.likePost(a,n,s)},ref:this.likeHeartRef,style:{color:t.includes(this.props.user._id)?"red":"white"}})," ",this.state.likesCount)}}]),a}(n.Component),D=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("p",null,r.a.createElement("i",{className:"fal fa-comment",onClick:this.props.toggleComments})," ",this.props.commentsCount)}}]),a}(n.Component),A=a(44),I=a.n(A),L=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"pst_c_lst"},r.a.createElement("div",{className:"pst_c_owner"},r.a.createElement(S,{username:this.props.comment.commentOwner.username,size:"35px",f_size:"10px",prf_image:this.props.comment.commentOwner.profileImage}),r.a.createElement(i.b,{className:"default_lnk_rm",to:"/profile/"+this.props.comment.commentOwner.username},r.a.createElement("p",null,this.props.comment.commentOwner.username))),r.a.createElement("div",{className:"pst_comment"},this.props.comment.commentInner),r.a.createElement("div",{className:"pst_comment_date"},r.a.createElement("p",null,C.setPostTimeDate(this.props.comment.commentDate))))}}]),a}(n.Component),U=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.postComment,a=e.comments;return r.a.createElement("div",{className:"hm_comments_main_hl"},a.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{postComment:t,comment:e,key:e._id}),r.a.createElement("hr",null))})))}}]),a}(n.Component),F=(a(342),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.customSpacing;return r.a.createElement("div",{className:"lds_hld"},r.a.createElement("div",{className:"loader",style:{margin:e?e+" auto":"50px auto"}}))}}]),a}(n.Component)),B=a(168),R=a.n(B),z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).findAndSetLinks=function(){for(var t=e.props.content.split(" "),a=0;a<=t.length-1;a++)t[a].startsWith("@")?t[a]=r.a.createElement(i.b,{className:"default_lnk_rm bt_tag at_bt_tag",key:a,to:"/profile/"+t[a].replace("@","")},t[a]):t[a].startsWith("#")?function(){var n=t[a];t[a]=r.a.createElement("button",{className:"bt_tag hs_bt_tag",key:a,onClick:function(){return e.props.history.push("/search?sch_q=".concat(n.replace("#","")))}},t[a])}():t[a]=t[a]+" ";return t},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("p",{className:"dn_text_hld"},this.findAndSetLinks())}}]),a}(n.Component),H=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showComments:!1,loadingComments:!1},e.toggleComments=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R.a.isEmpty(e.state.comments)){t.next=14;break}return e.setState({loadingComments:!0}),t.prev=2,t.next=5,g.a.get("/api/posts/rev/"+e.props.post._id+"/"+e.props.post.postId+"/comments",{withCredentials:!0});case 5:a=t.sent,e.setState({showComments:!e.state.showComments,comments:a.data,loadingComments:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:t.next=15;break;case 14:e.setState({showComments:!e.state.showComments});case 15:case"end":return t.stop()}}),t,null,[[2,9]])}))),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=I.a.connect(C.getBackendLink()+"/post");this.setState({socket:e}),e.emit("joinPost",this.props.post.postId)}},{key:"render",value:function(){var e=this,t=this.state.socket,a=this.props,n=a.post,s=a.user;return r.a.createElement("div",{className:"prf_post_mn"},r.a.createElement("div",{className:"post_header_m pd-1"},r.a.createElement("div",{className:"post_sub_hd"},r.a.createElement("div",{className:"mr-r-1"},r.a.createElement(S,{username:n.postOwner.username,size:"50px",f_size:"15px",prf_image:n.postOwner.profileImage})),r.a.createElement("div",{id:"post_hli"},r.a.createElement(i.b,{className:"default_lnk_rm",to:"/profile/"+n.postOwner.username},r.a.createElement("p",{className:"t-dark-sld"},n.postOwner.username)),r.a.createElement("p",{className:"t-muted-sm",style:{fontSize:"14px"}},C.setPostTimeDate(n.postDate)))),r.a.createElement("div",null,r.a.createElement("button",{className:"bt_default_rm drp_post"},r.a.createElement("i",{className:"fa fa-ellipsis-h"})))),r.a.createElement("div",{className:"post-header-inf"},r.a.createElement(z,{history:this.props.history,content:n.postHeader})),r.a.createElement("div",{className:"post-prev-info"},r.a.createElement("img",{onClick:function(){return e.props.history.push("/post/"+n.postId)},src:C.getBackendLink()+"/api/upld/imgs/image/preview/post-image/"+n.postPreviewHolder,alt:""}),t&&r.a.createElement("div",null,r.a.createElement("div",{className:"post_inter_hld"},r.a.createElement(P,{likes:n.likes,postId:n.postId,user:s,socket:t}),r.a.createElement(D,{toggleComments:this.toggleComments,commentsCount:this.props.commentsCount.length})),this.props.custom&&(this.state.loadingComments?r.a.createElement(F,null):this.state.showComments&&this.state.comments.comments.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(U,{postComment:n,comments:this.state.comments.comments}))))))}}]),a}(n.Component),M=(a(343),a(344),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,skipCount:0,newLoading:!1,postLimit:!1,canLoadData:!0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Chatify",e.next=3,g.a.get("/api/users/home",{withCredentials:!0});case 3:t=e.sent,a=I.a.connect(C.getBackendLink()+"/post"),this.setState({posts:t.data.homePosts,loading:!1,socket:a,authUser:t.data.authUser,skipCount:t.data.homePosts.length}),!0!==this.state.postLimit&&this.state.canLoadData&&document.addEventListener("scroll",Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.loadOnFetchScroll(n.state,"/api/users/home",(function(){n.setState({newLoading:!0,canLoadData:!1})}),(function(e){n.setState(e)}));case 2:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.posts,n=t.authUser,s=t.socket;return this.state.loading?r.a.createElement("div",{className:"home_main_hld"},r.a.createElement(F,null)):r.a.createElement("div",{className:"home_main_hld"},r.a.createElement(k.Spring,{from:{opacity:0},to:{opacity:1}},(function(t){return a.length>0?r.a.createElement("div",{style:t},a.map((function(t,a){return r.a.createElement("div",{style:{marginBottom:"3em"},key:a},r.a.createElement(H,{post:t,history:e.props.history,socket:s,user:n,commentsCount:t.postComments[0].comments,custom:!0}))})),e.state.newLoading&&!e.state.postLimit&&r.a.createElement(F,{customSpacing:"0px"})):r.a.createElement("div",null,r.a.createElement("p",null,"No posts"))})))}}]),a}(n.Component)),q=a(169),V=a(62),T=(a(345),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"inv_posts_empty"},r.a.createElement("div",null,r.a.createElement("i",{className:"fal fa-camera"}),r.a.createElement("h2",null,"No posts")))}}]),a}(n.Component)),W=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"prv_prf_access"},r.a.createElement("i",{style:{fontSize:"50px",marginBottom:"10px"},className:"fal fa-lock"}),r.a.createElement("p",null,"Sorry this profile is private"),r.a.createElement("p",null,"Follow this user to see their content"))}}]),a}(n.Component),J=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.user,a=this.props.authUser.data;return t._id===a._id||!t.private||t.followers.includes(a._id)?r.a.createElement("div",{className:"prf_post_grd"},r.a.createElement(r.a.Fragment,null,t.posts.length>0?r.a.createElement("div",{className:"prf_post_mn_hld"},t.posts.map((function(t){return r.a.createElement("div",{key:t._id,className:"post_img_h",style:{backgroundImage:"url(".concat(C.getBackendLink(),"/api/upld/imgs/image/preview/post-image/").concat(t.postPreviewHolder,")")},onClick:function(){return e.props.history.push("/post/"+t.postId)}})}))):r.a.createElement(T,null))):r.a.createElement("div",{className:"prf_post_grd"},r.a.createElement(W,null))}}]),a}(n.Component),K=(a(346),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.addImagePreview=function(t){if(e.PrevImgRef.files[0]){var a=e.PrevImgRef.files[0],n=new FileReader;n.readAsDataURL(a),n.onloadend=function(t){e.setState({PreviewImgsrc:n.result})}}},e.handlePostData=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n={postHeader:E.a.string().required(),post_image:E.a.required()},r={post_image:e.PrevImgRef.files[0],postHeader:e.postHeader.value},s=E.a.validate(r,n),!(o=s.error)){t.next=6;break}return t.abrupt("return",console.log(o.details[0].message));case 6:return(i=new FormData).set("postHeader",r.postHeader),i.append("post_image",r.post_image),t.prev=9,t.next=12,g.a.post("/api/posts/post/"+e.props.authUser.username+"/new",i,{withCredentials:!0});case 12:return t.abrupt("return",e.props.history.push("/profile/"+e.props.authUser.username));case 15:t.prev=15,t.t0=t.catch(9),console.log(t.t0.response);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(k.Spring,{from:{opacity:0,transform:"translate(0,-90px)"},to:{opacity:1,transform:"translate(0,0px)"},config:{friction:17,tension:100}},(function(t){return r.a.createElement("div",{className:"post_addfr_mn",style:t},r.a.createElement("form",{methd:"POST",onSubmit:e.handlePostData},r.a.createElement("textarea",{placeholder:"What's on your mind",ref:function(t){return e.postHeader=t}}),e.state.PreviewImgsrc&&r.a.createElement(k.Spring,{from:{opacity:0},to:{opacity:1}},(function(t){return r.a.createElement("div",{className:"prv_pst_img_g",style:t},r.a.createElement("img",{src:e.state.PreviewImgsrc,alt:"",id:"prv_img"}),r.a.createElement("i",{className:"fal fa-times",onClick:function(){return e.setState({PreviewImgsrc:void 0})}}))})),r.a.createElement("div",{className:"fl_hld_k "},r.a.createElement("div",{className:"fl_upld_holder"},r.a.createElement("input",{ref:function(t){return e.PrevImgRef=t},type:"file",name:"post_image",id:"fl_upld_r",onChange:e.addImagePreview}),r.a.createElement("i",{className:"fa fa-camera"})),r.a.createElement("button",{type:"submit",className:"prf_bt t-dark-sld",style:{backgroundColor:"#57585A"}},"Post"))))}))}}]),a}(n.Component)),Y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={addingPost:!1,isFollower:!1,followInviteSent:!1},e.addPostForm=function(){e.setState({addingPost:!e.state.addingPost})},e.followUser=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post("/api/users/profile/"+e.props.user.username+"/follow",null,{withCredentials:!0});case 3:a=t.sent,e.followBtnVal.value="Following",console.log(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.warn(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.user.followers.includes(this.props.authUser.data._id)?this.setState({isFollower:!0}):this.props.user.followRequests.includes(this.props.authUser.data._id)&&this.setState({followInviteSent:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.postsCount,s=this.props.authUser.data;return r.a.createElement("div",{className:"prf_mn_header"},r.a.createElement("div",{className:"prf_header_inp"},r.a.createElement("div",{className:"prf_header_ibt"},r.a.createElement("div",{className:"prf_header_img"},r.a.createElement(S,{username:a.username,size:"140px",f_size:"25px",prf_image:a.profileImage,uncc:!0}))),r.a.createElement("div",{className:"prf_info_des"},r.a.createElement("div",{id:"prf_header_ur"},r.a.createElement("h2",null,a.username),a._id===s._id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"prf_bt t-dark-sld",onClick:this.props.toggleModify},"Modify Profile"),r.a.createElement("button",{className:"prf_bt",onClick:this.addPostForm},r.a.createElement("i",{className:this.state.addingPost?"fal fa-times t-dark-sld":"fal fa-plus t-dark-sld"})))),r.a.createElement(z,{history:this.props.history,content:a.profileDescription?a.profileDescription:"No description"}),!(a._id===s._id)&&r.a.createElement("button",{className:"prf_bt",onClick:this.followUser,style:{backgroundColor:this.state.isFollower&&"#858585"}},r.a.createElement("p",{ref:function(t){return e.followBtnVal=t}},!this.state.followInviteSent&&r.a.createElement("i",{className:this.state.isFollower?"fa fa-check":"fa fa-plus"})," ",this.state.followInviteSent?"Follow Request Sent":this.state.isFollower?"Following":"Follow")))),this.state.addingPost&&a._id===s._id&&r.a.createElement(K,{addingPost:this.state.addingPost,authUser:s,history:this.props.history}),r.a.createElement("div",{className:"prf_header_st_inf"},r.a.createElement("div",null,r.a.createElement("p",null,"Posts"),r.a.createElement("p",{className:"t-dark-sld"},n)),r.a.createElement("div",null,r.a.createElement("p",null,"Followers"),r.a.createElement("p",{className:"t-dark-sld"},a.followers.length)),r.a.createElement("div",null,r.a.createElement("p",null,"Following"),r.a.createElement("p",{className:"t-dark-sld"},a.following.length))))}}]),a}(n.Component),G=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(k.Spring,{from:{opacity:0,transform:"scale(1.2)"},to:{opacity:1,transform:"scale(1)"}},(function(t){return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"er_prf_nfd_main"},r.a.createElement("i",{className:"fal fa-exclamation-circle"}),r.a.createElement("h2",null,e.props.title),r.a.createElement("p",null,e.props.body," ",r.a.createElement(i.b,{className:"cst_link",to:"/"},"Home"))))}))}}]),a}(n.Component),Q=a(37),X=(a(347),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.updateProfile=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,!(e.state.profileDescription||e.state.username||e.state.profileImage)){t.next=13;break}return n={username:e.state.username,profileDescription:e.state.profileDescription,profile_image:e.state.PreviewImgsrc},r=new FormData(a.target),(n.username||void 0!==n.username)&&r.set("username",n.username),(n.profileDescription||void 0!==n.profileDescription)&&r.set("profileDescription",n.profileDescription),(n.profile_image||void 0!==n.profileDescription)&&r.append("profile_image",n.profile_image),t.next=10,g.a.post("/api/users/profile/"+e.props.user.username+"/update",r,{withCredentials:!0});case 10:s=t.sent,e.props.togglePopup(),e.props.history.replace("/profile/"+s.data.username);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(t){e.setState(Object(Q.a)({},t.target.name,t.target.value))},e.imgUploadHandle=function(t){if(e.setState({profileImage:t.target.value}),t.target.files[0]){var a=t.target.files[0],n=new FileReader;n.readAsDataURL(a),n.onloadend=function(t){e.setState({PreviewImgsrc:n.result})}}},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(w,{title:"Modify Profile",togglePopup:this.props.togglePopup},r.a.createElement("form",{method:"POST",onSubmit:this.updateProfile},r.a.createElement("div",{className:"prf_modif_main"},r.a.createElement("div",{className:"prf_modif_img_h"},this.state.PreviewImgsrc?r.a.createElement("img",{src:this.state.PreviewImgsrc,alt:"",id:"modif_prv_img"}):r.a.createElement(S,{size:"180px",username:this.props.user.username,prf_image:this.props.user.profileImage,uncc:!0}),r.a.createElement("input",{type:"file",name:"profile_image",onChange:this.imgUploadHandle})),r.a.createElement("div",{className:"prf_modif_cmp"},r.a.createElement("div",{className:"prf_modif_us"},r.a.createElement("p",null,this.props.user.username),r.a.createElement("input",{type:"text",placeholder:"Change your name",name:"username",onChange:this.handleInput,autoComplete:"off"})),r.a.createElement("div",{className:"prf_modif_dsc"},r.a.createElement("textarea",{rows:"5",placeholder:"Describe your self",name:"profileDescription",onChange:this.handleInput,autoComplete:"off"})))),r.a.createElement("div",{className:"mdf_acc_h"},r.a.createElement("button",{className:"bt_default_rm bt_tag hs_bt_tag",style:{padding:"0.5em"}},"Change"))))}}]),a}(n.Component)),Z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,notFound:!1,skipCount:0,newLoading:!1,postLimit:!1,canLoadData:!0,postsCount:0,modifyActive:!1},e.toggleProfileModify=function(){var t=C.toggleSearch(e.state.modifyActive);e.setState({modifyActive:t})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.username,e.next=4,g.a.get("/api/users/profile/"+t,{withCredentials:!0});case 4:a=e.sent,this.setState({user:a.data.us_prf,loading:!1,skipCount:a.data.us_prf.posts.length,postsCount:a.data.postsCount}),document.title="Profile: "+t,!0!==this.state.postLimit&&this.state.canLoadData&&document.addEventListener("scroll",Object(u.a)(l.a.mark((function e(){var t,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(document.scrollingElement.scrollHeight-document.scrollingElement.scrollTop===document.scrollingElement.clientHeight)){e.next=7;break}return n.setState({newLoading:!0,canLoadData:!1}),e.next=5,g.a.get("/api/users/profile/"+n.props.match.params.username,{withCredentials:!0,params:{skp_count:n.state.skipCount}});case 5:(t=e.sent).data.us_prf.posts.length>0?(a=Object(V.a)(n.state.user.posts),r=a.concat(t.data.us_prf.posts),(s=Object(q.a)({},n.state.user)).posts=r,n.setState({user:s,skipCount:r.length,newLoading:!1,canLoadData:!0})):n.setState({postLimit:!0,newLoading:!1,canLoadData:!1});case 7:case"end":return e.stop()}}),e)})))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),this.setState({notFound:!0,loading:!1});case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(F,null):this.state.notFound?r.a.createElement(G,{title:"Profile Not found",body:"We could not find this profile, Maybe it was deleted by its owner or does not exist"}):r.a.createElement("div",{className:"prf_cont_hld_main"},r.a.createElement("div",{className:"prf_cont_hld"},this.state.modifyActive&&r.a.createElement(X,{togglePopup:this.toggleProfileModify,user:this.state.user,history:this.props.history}),r.a.createElement(k.Spring,{config:{duration:150},from:{opacity:0,transform:"scale(1.1)"},to:{opacity:1,transform:"scale(1)"}},(function(t){return r.a.createElement("div",{style:t},r.a.createElement(Y,{user:e.state.user,authUser:e.props.user,history:e.props.history,postsCount:e.state.postsCount,toggleModify:e.toggleProfileModify}),r.a.createElement("div",{className:"prf_mn_holder"},r.a.createElement(J,{history:e.props.history,user:e.state.user,authUser:e.props.user})))}))))}}]),a}(n.Component),$=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){document.title="Error: Page Unavailable"}},{key:"render",value:function(){return r.a.createElement("div",null,"Not Found")}}]),a}(n.Component),ee=(a(348),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.logUserOnSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=_.verifyLoginData(e.state),!(r=n.error)){t.next=6;break}console.log(r.details[0].message),t.next=9;break;case 6:return t.next=8,_.login(e.state);case 8:window.location.href="/";case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInputUser=function(t){e.setState(Object(Q.a)({},t.target.name,t.target.value))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){document.title="Login"}},{key:"render",value:function(){return r.a.createElement("div",{className:"lg_main_hl"},r.a.createElement("form",{method:"POST",className:"lg_form_sbn",onSubmit:this.logUserOnSubmit},r.a.createElement("div",{className:"form_inter_bt"},r.a.createElement("h2",null,"Login")),r.a.createElement("input",{type:"text",name:"ident",placeholder:"Email or Username",className:"otln",autoComplete:"off",onChange:this.handleInputUser}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"otln",autoComplete:"off",onChange:this.handleInputUser}),r.a.createElement("input",{type:"submit",readOnly:!0,className:"bt_default_rm"})))}}]),a}(n.Component)),te=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.logUserOnSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=_.verifyRegisterData(e.state),!(r=n.error)){t.next=6;break}console.log(r.details[0].message),t.next=9;break;case 6:return t.next=8,_.Register(e.state);case 8:e.props.history.replace("/profile/"+e.state.username);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInputUser=function(t){e.setState(Object(Q.a)({},t.target.name,t.target.value))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){document.title="Register"}},{key:"render",value:function(){return r.a.createElement("div",{className:"lg_main_hl"},r.a.createElement("form",{method:"POST",className:"lg_form_sbn",onSubmit:this.logUserOnSubmit},r.a.createElement("div",{className:"form_inter_bt"},r.a.createElement("h2",null,"Register")),r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",className:"otln",autoComplete:"off",onChange:this.handleInputUser}),r.a.createElement("input",{type:"email",name:"email",placeholder:"E-mail",className:"otln",autoComplete:"off",onChange:this.handleInputUser}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"otln",autoComplete:"off",onChange:this.handleInputUser}),r.a.createElement("input",{type:"submit",readOnly:!0,className:"bt_default_rm"})))}}]),a}(n.Component),ae=(a(349),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return this.props.loading&&r.a.createElement("div",{className:"bar_mn_full"},r.a.createElement(k.Spring,{from:{width:"0%"},to:{width:"100%"}},(function(e){return r.a.createElement("div",{style:e})})))}}]),a}(n.Component)),ne=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isAuthed:!1,loading:!0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({isAuthed:this.props.isAuthed.isAuthed,loading:!1,user:this.props.isAuthed.user})}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.isAuthed?r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{loading:this.state.loading}),this.props.navbar&&r.a.createElement(this.props.navbar,null),r.a.createElement(f.b,{path:this.props.path,component:function(t){return r.a.createElement(e.props.component,Object.assign({},t,{user:e.state.user,socketConnect:e.props.socketConnect,authUser:e.props.isAuthed}))},exact:this.props.exact})):r.a.createElement(f.a,{to:"/login"})}}]),a}(n.Component),re=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isAuthed:!1,loading:!0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({isAuthed:this.props.isAuthed.isAuthed,loading:!1})}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.isAuthed?r.a.createElement(f.a,{to:this.props.redirectPath||"/"}):r.a.createElement(r.a.Fragment,null,this.props.navbar&&r.a.createElement(this.props.navbar,null),r.a.createElement(f.b,{path:this.props.path,component:this.props.component,exact:this.props.exact}))}}]),a}(n.Component),se=(a(350),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={commentBody:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("commentPostRes",(function(t){var a={commentOwner:{username:t.cm_res.user.username,profileImage:t.cm_res.user.profileImage},commentInner:t.cm_res.newComment.commentInner,commentDate:t.cm_res.newComment.commentDate};e.props.addCommentOnPost(a),e.setState({commentBody:""})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.socket,n=t.user,s=t.post;return r.a.createElement("div",{className:"pst_inter_main_h"},r.a.createElement("div",{className:"pst_inter_ic"},r.a.createElement(P,{likes:s.likes,postId:s.postId,user:n,socket:a}),r.a.createElement(D,{toggleComments:this.props.toggleComments,commentsCount:this.props.commentsCount.length})),r.a.createElement("form",{className:"comment_fr_pst",method:"POST",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",null,r.a.createElement(S,{username:this.props.user.username,size:"40px",f_size:"10px",prf_image:this.props.user.profileImage}),r.a.createElement("input",{type:"text",placeholder:"Add a comment...",value:this.state.commentBody,onChange:function(t){return e.setState({commentBody:t.target.value})},onKeyDown:function(e){return C.commentPost(e,a,s,n,e.target.value)}}),r.a.createElement("i",{className:"fa fal-paper-plane"}))))}}]),a}(n.Component)),oe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.post;return r.a.createElement("div",null,r.a.createElement("div",{className:"pst_header"},r.a.createElement(S,{username:t.postOwner.username,size:"45px",f_size:"13px",prf_image:t.postOwner.profileImage}),r.a.createElement("h3",null,t.postOwner.username),r.a.createElement("p",null,C.setPostTimeDate(t.postDate)),this.props.closable&&r.a.createElement("button",{className:"bt_default_rm",onClick:function(){return C.returnBack(e.props.history)}},r.a.createElement("i",{className:"fal fa-times"}))),r.a.createElement(z,{history:this.props.history,content:t.postHeader}))}}]),a}(n.Component),ie=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={likes:0,comments:0,likesCount:0,showComments:!0},e.addCommentOnPost=function(t){var a=Object(V.a)(e.state.comments);a.push(t),e.setState({comments:a})},e.toggleComments=function(){e.setState({showComments:!e.state.showComments})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.likeHeartRef=r.a.createRef(),this.setState({likes:this.props.post.likes,comments:this.props.post.postComments[0].comments,likesCount:this.props.post.likes.length})}},{key:"render",value:function(){var e=this,t=this.props,a=t.post,n=t.socket,s=t.user;return r.a.createElement(k.Spring,{from:{opacity:0,transform:"scale(1.05)"},to:{opacity:1,transform:"scale(1)"}},(function(t){return r.a.createElement("div",{className:"pst_mn",style:t},r.a.createElement("div",{className:"pst_mn_img_prev"},r.a.createElement("img",{id:"bdr_blur",alt:"",src:"".concat(C.getBackendLink(),"/api/upld/imgs/image/preview/post-image/").concat(a.postPreviewHolder)}),r.a.createElement("img",{src:"".concat(C.getBackendLink(),"/api/upld/imgs/image/preview/post-image/").concat(a.postPreviewHolder),alt:a.postPreviewHolder})),r.a.createElement("div",{className:"pst_mn_mr_info"},r.a.createElement(oe,{post:a,closable:!0,history:e.props.history}),r.a.createElement("hr",null),r.a.createElement(se,{user:s,socket:n,post:a,toggleComments:e.toggleComments,commentsCount:e.state.comments,addCommentOnPost:e.addCommentOnPost}),r.a.createElement("hr",null),e.state.showComments&&r.a.createElement("div",{className:"pst_comments_lst_h"},e.state.comments.length>0?e.state.comments.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(L,{postComment:a,comment:e}),r.a.createElement("hr",null))})):r.a.createElement("div",null,r.a.createElement("h3",null,"No comments")))))}))}}]),a}(n.Component),ce=Object(f.g)(ie),le=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={notfound:!1,loading:!0,post:{},privatePost:!1},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=I.a.connect(C.getBackendLink()+"/post")).emit("joinPost",this.props.match.params.postId),e.prev=2,e.next=5,g.a.get("/api/posts/rev/"+this.props.match.params.postId,{withCredentials:!0});case 5:a=e.sent,this.setState({post:a.data.post,user:a.data.user,loading:!1,socket:t}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),403===e.t0.response.status?this.setState({privatePost:!0,loading:!1}):this.setState({notfound:!0,loading:!1}),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement("p",null,"Loading..."):this.state.notfound?r.a.createElement(G,{title:"post not found",body:"Sorry, we could not find this post maybe its owner removed it or it dosent exist. "}):this.state.privatePost?r.a.createElement(G,{title:"Private Post",body:"Sorry, But the post owner's profile is private so you cant view this content unless you follow this user"}):r.a.createElement("div",{className:"flx_pst_mn_holder"},r.a.createElement("div",{className:"pst_mn_holder"},r.a.createElement(ce,{post:this.state.post,user:this.state.user,socket:this.state.socket,authUser:this.props.authUser.user.data})))}}]),a}(n.Component),ue=a(170),me=a.n(ue),pe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ust_list_mn"},this.props.usersList.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"lst_it_us"},r.a.createElement(S,{username:t.username,prf_image:t.profileImage,size:"45px",f_size:"13px"}),r.a.createElement("div",{className:"us_ls_header"},r.a.createElement("h4",null,t.username),r.a.createElement("div",null,r.a.createElement("p",null,t.followers.length," ",r.a.createElement("span",null,"Followers")),r.a.createElement("p",{className:"mr-l-1"},t.following.length," ",r.a.createElement("span",null,"Following")))),r.a.createElement("div",{className:"fl_bt_lst_hl"},!(t._id===e.props.authUser)&&r.a.createElement("button",{className:"bt_default_rm"},r.a.createElement("i",{className:t.followers.includes(e.props.authUser)?"fa fa-check":"fa fa-plus"})),r.a.createElement("button",{className:"bt_default_rm",onClick:function(){return e.props.history.push("/profile/"+t.username)}},r.a.createElement("i",{className:"fa fa-arrow-right"})))),r.a.createElement("hr",null))})))}}]),a}(n.Component),he=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,notFound:!1},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=me.a.parse(this.props.location.search)).sch_q&&""!==t.sch_q){e.next=6;break}this.props.history.replace("/"),e.next=10;break;case 6:return e.next=8,g.a.get("/api/users/profiles/lst",{withCredentials:!0,params:{username:t.sch_q}});case 8:a=e.sent,this.setState({loading:!1,usersList:a.data.prf_user_list,authUser:a.data.authuser});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({loading:!1,notFound:!0}),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement(F,null):this.state.notFound?r.a.createElement(G,{title:"No users found",body:"We could not find any users"}):r.a.createElement("div",{className:"us_search_lst"},r.a.createElement(pe,{usersList:this.state.usersList,history:this.props.history,authUser:this.state.authUser}))}}]),a}(n.Component),de=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,isAuthed:!1},e.navBar_ss=function(){return r.a.createElement(x,{user:e.state.isAuthed.user||null})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.isAuthenticated();case 3:t=e.sent,this.setState({isAuthed:t,loading:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({isAuthed:!1,loading:!1});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"main_app"},!this.state.loading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,null,r.a.createElement(ne,{path:"/post/:postId",component:le,isAuthed:this.state.isAuthed}),r.a.createElement(ne,{path:"/profile/:username",component:Z,isAuthed:this.state.isAuthed,navbar:this.navBar_ss}),r.a.createElement(re,{path:"/register",component:te,isAuthed:this.state.isAuthed,navbar:this.navBar_ss}),r.a.createElement(ne,{path:"/search",component:he,isAuthed:this.state.isAuthed,navbar:this.navBar_ss}),r.a.createElement(re,{path:"/login",component:ee,isAuthed:this.state.isAuthed,navbar:this.navBar_ss}),r.a.createElement(ne,{path:"/",exact:!0,component:M,isAuthed:this.state.isAuthed,navbar:this.navBar_ss}),r.a.createElement(r.a.Fragment,null,this.navBar_ss(),r.a.createElement(f.b,{path:"/error/nfd",component:$}),r.a.createElement(f.a,{to:"/error/nfd"})))))}}]),a}(n.Component);g.a.defaults.baseURL="https://cht-bck-d.herokuapp.com",g.a.defaults.withCredentials=!0,g.a.defaults.credentials="include",o.a.render(r.a.createElement(i.a,null,r.a.createElement(de,null)),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.a20f03cb.chunk.js.map